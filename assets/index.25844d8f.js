import{w as Ge,S as te,i as le,s as ne,e as k,a as g,b as d,l as K,c as re,d as y,f as Oe,g as $,h as r,u as qe,j as je,k as Ie,t as q,m as E,n as Q,o as X,p as Z,q as S,r as x,v as V,x as oe,y as ce,z as _e,A as J,B as ke,C as Ue,D as be,E as de,F as ye,G as ue,H as fe}from"./vendor.e83506be.js";const Ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}};Ee();function ge(t){return{description:t.name,symbol:t.symbol,displaySymbol:t.symbol,type:"Common Stock"}}function ee(t){return parseFloat(t.toFixed(2))}function se(t){return t<0?"":"+"}function ie(t){return t<0?"text-red":"text-green"}let Te="c5itmc2ad3ifq3te92jg",We="https://finnhub.io/api/v1/",Fe="%231db954",He="%23222222",Ve="white";function he(t){return"https://widget.finnhub.io/widgets/stocks/chart?symbol="+t+"&watermarkColor="+Fe+"&backgroundColor="+He+"&textColor="+Ve}function Ce(t){let e=We+t+"&token="+Te;return fetch(e).then(l=>l.json())}function Ke(){return Ce("stock/symbol?exchange=US")}function ae(t){return Ce("quote?symbol="+t).then(e=>e.c)}let z;function Re(){let t;z.subscribe(l=>t=l);let e=t;e.stocks.forEach(async l=>{l.currentPrice=await ae(l.symbol)}),z.set(e)}function Ye(){let t=JSON.parse(localStorage.getItem("gameState"))||{gameStarted:!1,money:0,stocks:[]};z=Ge(t),(()=>{t.stocks.forEach(async l=>{l.currentPrice=await ae(l.symbol)})})(),z.subscribe(l=>{localStorage.setItem("gameState",JSON.stringify(l))}),setInterval(Re,1e3)}function we(t){let e,l,n;return{c(){e=k("button"),e.textContent="x",g(e,"class","bg-white shadow-none border-none p-0 ml-auto active:bg-white")},m(o,s){d(o,e,s),l||(n=K(e,"click",function(){re(t[1])&&t[1].apply(this,arguments)}),l=!0)},p(o,s){t=o},d(o){o&&y(e),l=!1,n()}}}function Je(t){let e,l,n,o,s,u,i=t[0]&&we(t);const f=t[4].default,a=Oe(f,t,t[3],null);return{c(){e=k("div"),l=k("div"),i&&i.c(),n=$(),a&&a.c(),g(l,"class","bg-opacity-100 bg-white card flex flex-col w-11/12 h-5/6"),g(e,"class","fixed w-full h-full left-0 top-0 bg-opacity-75 bg-black flex justify-center items-center")},m(c,p){d(c,e,p),r(e,l),i&&i.m(l,null),r(l,n),a&&a.m(l,null),o=!0,s||(u=K(window,"keydown",t[2]),s=!0)},p(c,[p]){c[0]?i?i.p(c,p):(i=we(c),i.c(),i.m(l,n)):i&&(i.d(1),i=null),a&&a.p&&(!o||p&8)&&qe(a,f,c,c[3],o?Ie(f,c[3],p,null):je(c[3]),null)},i(c){o||(q(a,c),o=!0)},o(c){E(a,c),o=!1},d(c){c&&y(e),i&&i.d(),a&&a.d(c),s=!1,u()}}}function ze(t,e,l){let{$$slots:n={},$$scope:o}=e,{closeable:s=!0}=e,{onClose:u=()=>{}}=e;function i(f){f.key==="Escape"&&u()}return t.$$set=f=>{"closeable"in f&&l(0,s=f.closeable),"onClose"in f&&l(1,u=f.onClose),"$$scope"in f&&l(3,o=f.$$scope)},[s,u,i,o,n]}class me extends te{constructor(e){super();le(this,e,ze,Je,ne,{closeable:0,onClose:1})}}function Se(t){let e;return{c(){e=k("p"),e.textContent="You don't have enough money to buy so many stocks."},m(l,n){d(l,e,n)},d(l){l&&y(e)}}}function Qe(t){let e,l=t[0].description+"",n,o,s,u,i,f,a,c,p,m,b,_,v,B,P,W,L,R,F,G,Y,N,T,I,D,O,h,j,A=t[7]&&Se();return{c(){e=k("h2"),n=S(l),o=$(),s=k("h2"),u=S("Current price: "),i=S(t[3]),f=S("$"),a=$(),A&&A.c(),c=$(),p=k("input"),b=$(),_=k("input"),B=$(),P=k("p"),W=S("Total cost: "),L=S(t[5]),R=S("$"),F=$(),G=k("p"),Y=S("Money left after the purchase: "),N=S(t[6]),T=S("$"),I=$(),D=k("button"),O=S("Buy"),g(p,"type","range"),g(p,"min","1"),g(p,"max",m=Math.floor(t[2].money/t[3])),g(_,"type","number"),g(_,"min","1"),g(_,"max",v=Math.floor(t[2].money/t[3])),D.disabled=t[7]},m(C,M){d(C,e,M),r(e,n),d(C,o,M),d(C,s,M),r(s,u),r(s,i),r(s,f),d(C,a,M),A&&A.m(C,M),d(C,c,M),d(C,p,M),x(p,t[4]),d(C,b,M),d(C,_,M),x(_,t[4]),d(C,B,M),d(C,P,M),r(P,W),r(P,L),r(P,R),d(C,F,M),d(C,G,M),r(G,Y),r(G,N),r(G,T),d(C,I,M),d(C,D,M),r(D,O),h||(j=[K(p,"change",t[9]),K(p,"input",t[9]),K(_,"input",t[10]),K(D,"click",t[8])],h=!0)},p(C,M){M&1&&l!==(l=C[0].description+"")&&V(n,l),M&8&&V(i,C[3]),C[7]?A||(A=Se(),A.c(),A.m(c.parentNode,c)):A&&(A.d(1),A=null),M&12&&m!==(m=Math.floor(C[2].money/C[3]))&&g(p,"max",m),M&16&&x(p,C[4]),M&12&&v!==(v=Math.floor(C[2].money/C[3]))&&g(_,"max",v),M&16&&oe(_.value)!==C[4]&&x(_,C[4]),M&32&&V(L,C[5]),M&64&&V(N,C[6]),M&128&&(D.disabled=C[7])},d(C){C&&y(e),C&&y(o),C&&y(s),C&&y(a),A&&A.d(C),C&&y(c),C&&y(p),C&&y(b),C&&y(_),C&&y(B),C&&y(P),C&&y(F),C&&y(G),C&&y(I),C&&y(D),h=!1,ce(j)}}}function Xe(t){let e,l;return e=new me({props:{closeable:!0,onClose:t[1],$$slots:{default:[Qe]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,[o]){const s={};o&2&&(s.onClose=n[1]),o&2301&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Ze(t,e,l){let{stock:n}=e,{onBuyClose:o}=e,s;z.subscribe(_=>l(2,s=_));let u;ae(n.symbol).then(_=>l(3,u=_));let i=1,f,a,c;function p(){let _=s;_.money=ee(_.money-f),_.stocks.push({symbol:n.symbol,name:n.description,priceAtBuy:u,currentPrice:u,count:i}),z.set(_),o()}function m(){i=oe(this.value),l(4,i)}function b(){i=oe(this.value),l(4,i)}return t.$$set=_=>{"stock"in _&&l(0,n=_.stock),"onBuyClose"in _&&l(1,o=_.onBuyClose)},t.$$.update=()=>{t.$$.dirty&60&&(l(5,f=ee(i*u)),l(6,a=ee(s.money-f)),l(7,c=f>s.money))},[n,o,s,u,i,f,a,c,p,m,b]}class xe extends te{constructor(e){super();le(this,e,Ze,Xe,ne,{stock:0,onBuyClose:1})}}function et(t){let e,l,n,o,s,u,i;return{c(){e=k("div"),l=k("p"),l.textContent="Loading price widget...",n=$(),o=k("iframe"),g(o,"title",t[0]),_e(o.src,s=he(t[0]))||g(o,"src",s),g(o,"frameborder","0"),g(o,"class","flex-grow"),g(e,"class","flex flex-grow")},m(f,a){d(f,e,a),r(e,l),t[4](l),r(e,n),r(e,o),t[5](o),u||(i=K(o,"load",t[3]),u=!0)},p(f,[a]){a&1&&g(o,"title",f[0]),a&1&&!_e(o.src,s=he(f[0]))&&g(o,"src",s)},i:J,o:J,d(f){f&&y(e),t[4](null),t[5](null),u=!1,i()}}}function tt(t,e,l){let{symbol:n}=e,o,s;function u(){l(2,s.style.display="none",s)}function i(a){ke[a?"unshift":"push"](()=>{s=a,l(2,s)})}function f(a){ke[a?"unshift":"push"](()=>{o=a,l(1,o)})}return t.$$set=a=>{"symbol"in a&&l(0,n=a.symbol)},[n,o,s,u,i,f]}class ve extends te{constructor(e){super();le(this,e,tt,et,ne,{symbol:0})}}function lt(t){let e,l=t[0].description+"",n,o,s,u,i,f,a,c,p,m,b,_,v;return s=new ve({props:{symbol:t[0].symbol}}),{c(){e=k("h2"),n=S(l),o=$(),Q(s.$$.fragment),u=$(),i=k("h2"),f=S("Current price: "),a=S(t[3]),c=S("$"),p=$(),m=k("button"),m.textContent="Buy"},m(B,P){d(B,e,P),r(e,n),d(B,o,P),X(s,B,P),d(B,u,P),d(B,i,P),r(i,f),r(i,a),r(i,c),d(B,p,P),d(B,m,P),b=!0,_||(v=K(m,"click",function(){re(t[1])&&t[1].apply(this,arguments)}),_=!0)},p(B,P){t=B,(!b||P&1)&&l!==(l=t[0].description+"")&&V(n,l);const W={};P&1&&(W.symbol=t[0].symbol),s.$set(W),(!b||P&8)&&V(a,t[3])},i(B){b||(q(s.$$.fragment,B),b=!0)},o(B){E(s.$$.fragment,B),b=!1},d(B){B&&y(e),B&&y(o),Z(s,B),B&&y(u),B&&y(i),B&&y(p),B&&y(m),_=!1,v()}}}function nt(t){let e,l;return e=new me({props:{closeable:!0,onClose:t[2],$$slots:{default:[lt]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,[o]){const s={};o&4&&(s.onClose=n[2]),o&27&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function ot(t,e,l){let{stock:n}=e,{onClickBuy:o}=e,{onDetailClose:s}=e,u;return ae(n.symbol).then(i=>l(3,u=i)),t.$$set=i=>{"stock"in i&&l(0,n=i.stock),"onClickBuy"in i&&l(1,o=i.onClickBuy),"onDetailClose"in i&&l(2,s=i.onDetailClose)},[n,o,s,u]}class st extends te{constructor(e){super();le(this,e,ot,nt,ne,{stock:0,onClickBuy:1,onDetailClose:2})}}function $e(t,e,l){const n=t.slice();return n[6]=e[l],n}function it(t){let e;return{c(){e=k("p"),e.textContent="Failed. Please check your internet connection."},m(l,n){d(l,e,n)},d(l){l&&y(e)}}}function ut(t){return{c:J,m:J,d:J}}function ft(t){let e;return{c(){e=k("p"),e.textContent="Downloading a list of available stocks..."},m(l,n){d(l,e,n)},d(l){l&&y(e)}}}function Be(t){let e,l,n,o=t[6].description+"",s,u,i=t[6].symbol+"",f,a,c,p,m;return{c(){e=k("tr"),l=k("td"),n=k("button"),s=S(o),u=S(" ("),f=S(i),a=S(")"),c=$(),g(n,"class","bg-white shadow-none border-none m-auto p-0 active:bg-white")},m(b,_){d(b,e,_),r(e,l),r(l,n),r(n,s),r(n,u),r(n,f),r(n,a),r(e,c),p||(m=K(n,"click",function(){re(t[0](t[6]))&&t[0](t[6]).apply(this,arguments)}),p=!0)},p(b,_){t=b,_&4&&o!==(o=t[6].description+"")&&V(s,o),_&4&&i!==(i=t[6].symbol+"")&&V(f,i)},d(b){b&&y(e),p=!1,m()}}}function rt(t){let e,l,n,o,s,u,i,f,a,c={ctx:t,current:null,token:null,hasCatch:!0,pending:ft,then:ut,catch:it};Ue(t[3],c);let p=t[2],m=[];for(let b=0;b<p.length;b+=1)m[b]=Be($e(t,p,b));return{c(){e=k("div"),l=k("h2"),l.textContent="Buy stocks:",n=$(),o=k("input"),s=$(),c.block.c(),u=$(),i=k("table");for(let b=0;b<m.length;b+=1)m[b].c();g(o,"type","text"),g(o,"placeholder","Search for stocks"),g(e,"class","card")},m(b,_){d(b,e,_),r(e,l),r(e,n),r(e,o),x(o,t[1]),r(e,s),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=u,r(e,u),r(e,i);for(let v=0;v<m.length;v+=1)m[v].m(i,null);f||(a=K(o,"input",t[5]),f=!0)},p(b,[_]){if(t=b,_&2&&o.value!==t[1]&&x(o,t[1]),_&5){p=t[2];let v;for(v=0;v<p.length;v+=1){const B=$e(t,p,v);m[v]?m[v].p(B,_):(m[v]=Be(B),m[v].c(),m[v].m(i,null))}for(;v<m.length;v+=1)m[v].d(1);m.length=p.length}},i:J,o:J,d(b){b&&y(e),c.block.d(),c.token=null,c=null,be(m,b),f=!1,a()}}}function ct(t,e,l){let{onClickStock:n}=e,o=[],s=Ke().then(a=>{l(4,o=a)}),u="",i;function f(){u=this.value,l(1,u),l(4,o),l(2,i)}return t.$$set=a=>{"onClickStock"in a&&l(0,n=a.onClickStock)},t.$$.update=()=>{t.$$.dirty&22&&(l(1,u=u.toUpperCase()),l(2,i=o.filter(a=>a.description.startsWith(u)||a.symbol.startsWith(u))),i.length>10&&l(2,i.length=10,i))},[n,u,i,s,o,f]}class at extends te{constructor(e){super();le(this,e,ct,rt,ne,{onClickStock:0})}}function mt(t){let e,l,n=t[0].count+"",o,s,u=t[0].name+"",i,f,a,c=ee(t[0].count*t[0].currentPrice)+"",p,m,b,_,v,B=se(t[3])+t[3]+"",P,W,L,R,F,G=se(t[4])+t[4]+"",Y,N,T,I,D,O,h,j,A,C;return{c(){e=k("div"),l=k("p"),o=S(n),s=S("x "),i=S(u),f=$(),a=k("p"),p=S(c),m=S("$"),b=$(),_=k("div"),v=k("p"),P=S(B),W=S("$"),R=$(),F=k("p"),Y=S(G),N=S("%"),I=$(),D=k("div"),O=k("button"),O.textContent="Details",h=$(),j=k("button"),j.textContent="Sell",g(v,"class",L="m-1 p-1 "+ie(t[3])),g(F,"class",T="m-1 p-1 "+ie(t[4])),g(_,"class","flex flex-row justify-center"),g(D,"class","flex flex-row"),g(e,"class","shadow-lg border rounded-lg p-3 m-3 inline-flex flex-col items-center")},m(M,H){d(M,e,H),r(e,l),r(l,o),r(l,s),r(l,i),r(e,f),r(e,a),r(a,p),r(a,m),r(e,b),r(e,_),r(_,v),r(v,P),r(v,W),r(_,R),r(_,F),r(F,Y),r(F,N),r(e,I),r(e,D),r(D,O),r(D,h),r(D,j),A||(C=[K(O,"click",function(){re(t[2](ge(t[0])))&&t[2](ge(t[0])).apply(this,arguments)}),K(j,"click",function(){re(t[1](t[0]))&&t[1](t[0]).apply(this,arguments)})],A=!0)},p(M,[H]){t=M,H&1&&n!==(n=t[0].count+"")&&V(o,n),H&1&&u!==(u=t[0].name+"")&&V(i,u),H&1&&c!==(c=ee(t[0].count*t[0].currentPrice)+"")&&V(p,c),H&8&&B!==(B=se(t[3])+t[3]+"")&&V(P,B),H&8&&L!==(L="m-1 p-1 "+ie(t[3]))&&g(v,"class",L),H&16&&G!==(G=se(t[4])+t[4]+"")&&V(Y,G),H&16&&T!==(T="m-1 p-1 "+ie(t[4]))&&g(F,"class",T)},i:J,o:J,d(M){M&&y(e),A=!1,ce(C)}}}function pt(t,e,l){let{stock:n}=e,{onClickSell:o}=e,{onClickDetails:s}=e,u,i;return t.$$set=f=>{"stock"in f&&l(0,n=f.stock),"onClickSell"in f&&l(1,o=f.onClickSell),"onClickDetails"in f&&l(2,s=f.onClickDetails)},t.$$.update=()=>{t.$$.dirty&9&&(l(3,u=ee(n.currentPrice-n.priceAtBuy)),l(4,i=ee(u/n.priceAtBuy*100)))},[n,o,s,u,i]}class _t extends te{constructor(e){super();le(this,e,pt,mt,ne,{stock:0,onClickSell:1,onClickDetails:2})}}function Pe(t){let e;return{c(){e=k("p"),e.textContent="You don't have so many stocks!"},m(l,n){d(l,e,n)},d(l){l&&y(e)}}}function kt(t){let e,l=t[0].name+"",n,o,s,u,i,f,a=t[0].priceAtBuy+"",c,p,m,b,_=t[0].currentPrice+"",v,B,P,W,L,R,F,G,Y,N,T,I,D,O,h,j,A,C,M;s=new ve({props:{symbol:t[0].symbol}});let H=t[4]&&Pe();return{c(){e=k("h2"),n=S(l),o=$(),Q(s.$$.fragment),u=$(),i=k("p"),f=S("Price at buy: "),c=S(a),p=$(),m=k("p"),b=S("Current price: "),v=S(_),B=S("$"),P=$(),H&&H.c(),W=$(),L=k("input"),F=$(),G=k("input"),N=$(),T=k("p"),I=S("Money after the sell: "),D=S(t[3]),O=$(),h=k("button"),j=S("Sell"),g(L,"type","range"),g(L,"min","1"),g(L,"max",R=t[0].count),g(G,"type","number"),g(G,"min","1"),g(G,"max",Y=t[0].count),h.disabled=t[4]},m(w,U){d(w,e,U),r(e,n),d(w,o,U),X(s,w,U),d(w,u,U),d(w,i,U),r(i,f),r(i,c),d(w,p,U),d(w,m,U),r(m,b),r(m,v),r(m,B),d(w,P,U),H&&H.m(w,U),d(w,W,U),d(w,L,U),x(L,t[2]),d(w,F,U),d(w,G,U),x(G,t[2]),d(w,N,U),d(w,T,U),r(T,I),r(T,D),d(w,O,U),d(w,h,U),r(h,j),A=!0,C||(M=[K(L,"change",t[7]),K(L,"input",t[7]),K(G,"input",t[8]),K(h,"click",t[5])],C=!0)},p(w,U){(!A||U&1)&&l!==(l=w[0].name+"")&&V(n,l);const pe={};U&1&&(pe.symbol=w[0].symbol),s.$set(pe),(!A||U&1)&&a!==(a=w[0].priceAtBuy+"")&&V(c,a),(!A||U&1)&&_!==(_=w[0].currentPrice+"")&&V(v,_),w[4]?H||(H=Pe(),H.c(),H.m(W.parentNode,W)):H&&(H.d(1),H=null),(!A||U&1&&R!==(R=w[0].count))&&g(L,"max",R),U&4&&x(L,w[2]),(!A||U&1&&Y!==(Y=w[0].count))&&g(G,"max",Y),U&4&&oe(G.value)!==w[2]&&x(G,w[2]),(!A||U&8)&&V(D,w[3]),(!A||U&16)&&(h.disabled=w[4])},i(w){A||(q(s.$$.fragment,w),A=!0)},o(w){E(s.$$.fragment,w),A=!1},d(w){w&&y(e),w&&y(o),Z(s,w),w&&y(u),w&&y(i),w&&y(p),w&&y(m),w&&y(P),H&&H.d(w),w&&y(W),w&&y(L),w&&y(F),w&&y(G),w&&y(N),w&&y(T),w&&y(O),w&&y(h),C=!1,ce(M)}}}function bt(t){let e,l;return e=new me({props:{closeable:!0,onClose:t[1],$$slots:{default:[kt]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,[o]){const s={};o&2&&(s.onClose=n[1]),o&541&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function dt(t,e,l){let{stock:n}=e,{onSellClose:o}=e,s;z.subscribe(m=>l(6,s=m));let u=1,i,f;function a(){let m=s;m.money=ee(m.money+u*n.currentPrice),n.count===u?m.stocks.splice(m.stocks.indexOf(n),1):m.stocks[m.stocks.indexOf(n)].count-=u,z.set(m),o()}function c(){u=oe(this.value),l(2,u)}function p(){u=oe(this.value),l(2,u)}return t.$$set=m=>{"stock"in m&&l(0,n=m.stock),"onSellClose"in m&&l(1,o=m.onSellClose)},t.$$.update=()=>{t.$$.dirty&69&&(l(4,f=u>n.count),l(3,i=ee(s.money+u*n.currentPrice)))},[n,o,u,i,f,a,s,c,p]}class yt extends te{constructor(e){super();le(this,e,dt,bt,ne,{stock:0,onSellClose:1})}}function gt(t){let e,l,n,o,s,u,i,f=se(t[2])+t[2]+"",a,c,p,m,b,_=se(t[3])+t[3]+"",v,B,P,W,L,R,F=t[0].money+"",G,Y;return{c(){e=k("div"),l=k("h1"),n=S(t[1]),o=S("$"),s=$(),u=k("div"),i=k("h2"),a=S(f),c=S("$"),m=$(),b=k("h2"),v=S(_),B=S("%"),W=$(),L=k("p"),R=S("Capital: "),G=S(F),Y=S("$"),g(l,"class","text-center text-4xl font-light"),g(i,"class",p=ie(t[2])),g(b,"class",P=ie(t[3])),g(u,"class","flex flex-row justify-center"),g(L,"class","text-center text-xl font-light")},m(N,T){d(N,e,T),r(e,l),r(l,n),r(l,o),r(e,s),r(e,u),r(u,i),r(i,a),r(i,c),r(u,m),r(u,b),r(b,v),r(b,B),r(e,W),r(e,L),r(L,R),r(L,G),r(L,Y)},p(N,[T]){T&2&&V(n,N[1]),T&4&&f!==(f=se(N[2])+N[2]+"")&&V(a,f),T&4&&p!==(p=ie(N[2]))&&g(i,"class",p),T&8&&_!==(_=se(N[3])+N[3]+"")&&V(v,_),T&8&&P!==(P=ie(N[3]))&&g(b,"class",P),T&1&&F!==(F=N[0].money+"")&&V(G,F)},i:J,o:J,d(N){N&&y(e)}}}function ht(t,e,l){let n,o,s,u;return z.subscribe(i=>l(0,n=i)),t.$$.update=()=>{t.$$.dirty&7&&(l(1,o=n.money+n.stocks.map(i=>i.currentPrice*i.count).reduce((i,f)=>i+f,0)),l(1,o=ee(o)),l(2,s=ee(o-n.startMoney)),l(3,u=ee(s/n.startMoney*100)))},[n,o,s,u]}class Ct extends te{constructor(e){super();le(this,e,ht,gt,ne,{})}}function De(t,e,l){const n=t.slice();return n[11]=e[l],n}function wt(t){let e;return{c(){e=k("p"),e.textContent="You haven't bought any stocks yet."},m(l,n){d(l,e,n)},p:J,i:J,o:J,d(l){l&&y(e)}}}function St(t){let e,l,n=t[0].stocks,o=[];for(let u=0;u<n.length;u+=1)o[u]=Me(De(t,n,u));const s=u=>E(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<o.length;u+=1)o[u].c();e=de()},m(u,i){for(let f=0;f<o.length;f+=1)o[f].m(u,i);d(u,e,i),l=!0},p(u,i){if(i&545){n=u[0].stocks;let f;for(f=0;f<n.length;f+=1){const a=De(u,n,f);o[f]?(o[f].p(a,i),q(o[f],1)):(o[f]=Me(a),o[f].c(),q(o[f],1),o[f].m(e.parentNode,e))}for(ue(),f=n.length;f<o.length;f+=1)s(f);fe()}},i(u){if(!l){for(let i=0;i<n.length;i+=1)q(o[i]);l=!0}},o(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)E(o[i]);l=!1},d(u){be(o,u),u&&y(e)}}}function Me(t){let e,l;return e=new _t({props:{stock:t[11],onClickSell:t[9],onClickDetails:t[5]}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,o){const s={};o&1&&(s.stock=n[11]),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Le(t){let e,l;return e=new st({props:{stock:t[1],onClickBuy:t[6],onDetailClose:t[7]}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,o){const s={};o&2&&(s.stock=n[1]),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Ae(t){let e,l;return e=new xe({props:{stock:t[2],onBuyClose:t[8]}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,o){const s={};o&4&&(s.stock=n[2]),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Ne(t){let e,l;return e=new yt({props:{stock:t[3],onSellClose:t[10]}}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},p(n,o){const s={};o&8&&(s.stock=n[3]),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function vt(t){let e,l,n,o,s,u,i,f,a,c,p,m,b,_,v,B,P,W,L,R,F,G;s=new Ct({});const Y=[St,wt],N=[];function T(h,j){return h[0].stocks.length>0?0:1}c=T(t),p=N[c]=Y[c](t),b=new at({props:{onClickStock:t[5]}});let I=t[1]!==void 0&&Le(t),D=t[2]!==void 0&&Ae(t),O=t[3]!==void 0&&Ne(t);return{c(){e=k("div"),l=k("h1"),l.textContent="Digital Broker",n=$(),o=k("div"),Q(s.$$.fragment),u=$(),i=k("h2"),i.textContent="Stocks:",f=$(),a=k("div"),p.c(),m=$(),Q(b.$$.fragment),_=$(),v=k("form"),v.innerHTML='<button type="submit">Reset the Game</button>',B=$(),I&&I.c(),P=$(),D&&D.c(),W=$(),O&&O.c(),L=de(),g(l,"class","text-center text-4xl font-light m-2"),g(a,"class","flex flex-col lg:flex-row lg:flex-wrap"),g(o,"class","card"),g(e,"class","flex flex-col items-center")},m(h,j){d(h,e,j),r(e,l),r(e,n),r(e,o),X(s,o,null),r(o,u),r(o,i),r(o,f),r(o,a),N[c].m(a,null),r(e,m),X(b,e,null),r(e,_),r(e,v),d(h,B,j),I&&I.m(h,j),d(h,P,j),D&&D.m(h,j),d(h,W,j),O&&O.m(h,j),d(h,L,j),R=!0,F||(G=K(v,"submit",ye(t[4])),F=!0)},p(h,[j]){let A=c;c=T(h),c===A?N[c].p(h,j):(ue(),E(N[A],1,1,()=>{N[A]=null}),fe(),p=N[c],p?p.p(h,j):(p=N[c]=Y[c](h),p.c()),q(p,1),p.m(a,null)),h[1]!==void 0?I?(I.p(h,j),j&2&&q(I,1)):(I=Le(h),I.c(),q(I,1),I.m(P.parentNode,P)):I&&(ue(),E(I,1,1,()=>{I=null}),fe()),h[2]!==void 0?D?(D.p(h,j),j&4&&q(D,1)):(D=Ae(h),D.c(),q(D,1),D.m(W.parentNode,W)):D&&(ue(),E(D,1,1,()=>{D=null}),fe()),h[3]!==void 0?O?(O.p(h,j),j&8&&q(O,1)):(O=Ne(h),O.c(),q(O,1),O.m(L.parentNode,L)):O&&(ue(),E(O,1,1,()=>{O=null}),fe())},i(h){R||(q(s.$$.fragment,h),q(p),q(b.$$.fragment,h),q(I),q(D),q(O),R=!0)},o(h){E(s.$$.fragment,h),E(p),E(b.$$.fragment,h),E(I),E(D),E(O),R=!1},d(h){h&&y(e),Z(s),N[c].d(),Z(b),h&&y(B),I&&I.d(h),h&&y(P),D&&D.d(h),h&&y(W),O&&O.d(h),h&&y(L),F=!1,G()}}}function $t(t,e,l){let n;z.subscribe(_=>{l(0,n=_)});function o(){z.set({gameStarted:!1,money:5e4,startMoney:5e4,stocks:[]})}let s,u,i;function f(_){l(1,s=_)}function a(){l(2,u=s),l(1,s=void 0)}function c(){l(1,s=void 0)}function p(){l(2,u=void 0)}function m(_){l(3,i=_)}function b(){l(3,i=void 0)}return[n,s,u,i,o,f,a,c,p,m,b]}class Bt extends te{constructor(e){super();le(this,e,$t,vt,ne,{})}}function Pt(t){let e,l,n,o,s,u,i,f,a,c,p;return{c(){e=k("div"),l=k("h1"),l.textContent="Digital Broker",n=$(),o=k("form"),s=k("p"),s.textContent="How much money do you want to start with?",u=$(),i=k("input"),f=$(),a=k("button"),a.textContent="Start Trading!",g(l,"class","text-xl font-bold"),g(i,"type","number"),g(i,"min","0"),g(i,"class","border rounded p-1"),g(a,"type","submit"),g(e,"class","text-center m-4")},m(m,b){d(m,e,b),r(e,l),r(e,n),r(e,o),r(o,s),r(o,u),r(o,i),x(i,t[0]),r(o,f),r(o,a),c||(p=[K(i,"input",t[2]),K(o,"submit",ye(t[1]))],c=!0)},p(m,[b]){b&1&&oe(i.value)!==m[0]&&x(i,m[0])},i:J,o:J,d(m){m&&y(e),c=!1,ce(p)}}}function Dt(t,e,l){z.subscribe(u=>{});let n=5e4;function o(){z.set({gameStarted:!0,money:n,startMoney:n,stocks:[]})}function s(){n=oe(this.value),l(0,n)}return[n,o,s]}class Mt extends te{constructor(e){super();le(this,e,Dt,Pt,ne,{})}}function Lt(t){let e,l;return e=new Mt({}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function At(t){let e,l;return e=new Bt({}),{c(){Q(e.$$.fragment)},m(n,o){X(e,n,o),l=!0},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Nt(t){let e,l,n,o,s,u;const i=[At,Lt],f=[];function a(c,p){return c[0].gameStarted?0:1}return l=a(t),n=f[l]=i[l](t),{c(){e=k("main"),n.c(),o=$(),s=k("footer"),s.innerHTML='<p>See the source code on <a href="https://github.com/physics3D/digital-broker" class="underline text-blue-900" target="_blank">Github</a></p>',g(s,"class","fixed left-0 right-0 bottom-0 bg-gray-400 text-black text-center")},m(c,p){d(c,e,p),f[l].m(e,null),d(c,o,p),d(c,s,p),u=!0},p(c,[p]){let m=l;l=a(c),l!==m&&(ue(),E(f[m],1,1,()=>{f[m]=null}),fe(),n=f[l],n||(n=f[l]=i[l](c),n.c()),q(n,1),n.m(e,null))},i(c){u||(q(n),u=!0)},o(c){E(n),u=!1},d(c){c&&y(e),f[l].d(),c&&y(o),c&&y(s)}}}function Gt(t,e,l){Ye();let n;return z.subscribe(o=>{l(0,n=o)}),[n]}class Ot extends te{constructor(e){super();le(this,e,Gt,Nt,ne,{})}}new Ot({target:document.getElementById("app")});
